<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ä¿¡ç®±ç‚¸è—¥å•é¡Œ DP å®Œæ•´åœ–è§£</title>
  <style>
      * {
          box-sizing: border-box;
          margin: 0;
          padding: 0;
      }
      body {
          font-family: 'Microsoft JhengHei', 'Arial', sans-serif;
          width: 718px;
          margin: 0 auto;
          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
          min-height: 100vh;
          padding: 10px;
      }
      .container {
          background: white;
          padding: 15px;
          border-radius: 12px;
          box-shadow: 0 8px 25px rgba(0,0,0,0.15);
          margin-bottom: 15px;
          width: 100%;
      }
      .problem-header {
          background: linear-gradient(135deg, #ff6b6b, #ee5a24);
          color: white;
          padding: 15px;
          border-radius: 8px;
          margin-bottom: 15px;
          text-align: center;
      }
      .problem-header h1 {
          font-size: 24px;
          margin-bottom: 8px;
      }
      .problem-header p {
          font-size: 14px;
          opacity: 0.9;
      }
      .controls {
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 10px;
          margin: 15px 0;
          padding: 12px;
          background: #f8f9fa;
          border-radius: 8px;
      }
      .control-group {
          display: flex;
          flex-direction: column;
          gap: 4px;
      }
      .control-row {
          grid-column: 1 / -1;
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 10px;
      }
      label {
          font-weight: bold;
          color: #333;
          font-size: 13px;
      }
      input, select, button {
          padding: 8px;
          border: 2px solid #ddd;
          border-radius: 4px;
          font-size: 14px;
      }
      button {
          background: linear-gradient(135deg, #4facfe, #00f2fe);
          color: white;
          border: none;
          cursor: pointer;
          font-weight: bold;
          transition: all 0.3s ease;
      }
      button:hover {
          transform: translateY(-1px);
          box-shadow: 0 4px 12px rgba(0,0,0,0.2);
      }
      .legend {
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 8px;
          margin: 15px 0;
          padding: 12px;
          background: #f8f9fa;
          border-radius: 8px;
      }
      .legend-item {
          display: flex;
          align-items: center;
          gap: 6px;
          font-size: 12px;
      }
      .legend-color {
          width: 16px;
          height: 16px;
          border: 1px solid #333;
          border-radius: 3px;
          flex-shrink: 0;
      }
      .current-cell { background: #ffeb3b; }
      .computed-cell { background: #c8e6c9; }
      .base-case { background: #ffcdd2; }
      .impossible-case { background: #f5f5f5; color: #999; }

      .dp-table {
          overflow-x: auto;
          margin: 15px 0;
          background: white;
          border-radius: 8px;
          padding: 10px;
      }
      .table {
          width: 100%;
          border-collapse: collapse;
          font-family: 'Courier New', monospace;
          font-size: 11px;
      }
      .table th, .table td {
          border: 1px solid #ddd;
          padding: 4px;
          text-align: center;
          position: relative;
      }
      .table th {
          background: linear-gradient(135deg, #667eea, #764ba2);
          color: white;
          font-weight: bold;
          font-size: 10px;
      }
      .table td {
          background: #f9f9f9;
          transition: all 0.3s ease;
          min-width: 30px;
      }
      .table td:hover {
          background: #e3f2fd;
          transform: scale(1.1);
          z-index: 10;
          box-shadow: 0 0 10px rgba(0,0,0,0.3);
      }

      .strategy-viz {
          background: #f1f3f4;
          border-radius: 8px;
          padding: 15px;
          margin: 15px 0;
      }
      .strategy-step {
          display: flex;
          flex-direction: column;
          margin: 8px 0;
          padding: 10px;
          background: white;
          border-radius: 6px;
          box-shadow: 0 2px 8px rgba(0,0,0,0.1);
          font-size: 13px;
      }
      .step-header {
          font-weight: bold;
          color: #1976d2;
          margin-bottom: 6px;
      }
      .step-content {
          display: flex;
          align-items: center;
          flex-wrap: wrap;
          gap: 8px;
      }
      .mailbox {
          width: 24px;
          height: 18px;
          background: #8bc34a;
          border: 1px solid #689f38;
          border-radius: 3px;
          display: flex;
          align-items: center;
          justify-content: center;
          color: white;
          font-weight: bold;
          font-size: 10px;
          flex-shrink: 0;
      }
      .mailbox.destroyed {
          background: #f44336;
          border-color: #d32f2f;
      }
      .cracker {
          width: 12px;
          height: 12px;
          background: #ff9800;
          border-radius: 50%;
          display: inline-block;
          margin: 1px;
      }

      .explanation {
          background: linear-gradient(135deg, #a8edea, #fed6e3);
          padding: 15px;
          border-radius: 8px;
          margin: 15px 0;
      }
      .explanation h3 {
          color: #333;
          margin-bottom: 8px;
          font-size: 16px;
      }
      .explanation h4 {
          color: #555;
          margin: 10px 0 5px 0;
          font-size: 14px;
      }
      .explanation p, .explanation li {
          font-size: 13px;
          line-height: 1.4;
          margin-bottom: 5px;
      }
      .explanation ul {
          padding-left: 20px;
      }

      .formula {
          background: #263238;
          color: #4caf50;
          padding: 10px;
          border-radius: 6px;
          font-family: 'Courier New', monospace;
          font-size: 12px;
          margin: 8px 0;
          overflow-x: auto;
          white-space: pre;
      }

      .tabs {
          display: flex;
          background: #f0f0f0;
          border-radius: 8px 8px 0 0;
          overflow: hidden;
      }
      .tab {
          flex: 1;
          padding: 10px;
          text-align: center;
          background: #e0e0e0;
          cursor: pointer;
          font-size: 12px;
          font-weight: bold;
          transition: all 0.3s ease;
      }
      .tab.active {
          background: white;
          color: #1976d2;
      }
      .tab:hover {
          background: #d0d0d0;
      }
      .tab-content {
          background: white;
          border-radius: 0 0 8px 8px;
          border: 1px solid #ddd;
          border-top: none;
          min-height: 200px;
      }

      .complexity-analysis {
          background: #fff3e0;
          border: 2px solid #ff9800;
          border-radius: 8px;
          padding: 12px;
          margin: 15px 0;
      }

      .step-by-step {
          background: #f3e5f5;
          border-radius: 8px;
          padding: 15px;
          margin: 15px 0;
      }
      .step {
          background: white;
          margin: 8px 0;
          padding: 10px;
          border-radius: 6px;
          border-left: 4px solid #9c27b0;
      }

      .examples {
          background: #e8f5e8;
          border-radius: 8px;
          padding: 15px;
          margin: 15px 0;
      }
      .example {
          background: white;
          margin: 8px 0;
          padding: 10px;
          border-radius: 6px;
          border-left: 4px solid #4caf50;
          font-size: 13px;
      }

      @keyframes pulse {
          0% { opacity: 1; }
          50% { opacity: 0.7; }
          100% { opacity: 1; }
      }
      .current-cell {
          animation: pulse 1s infinite;
      }

      @media (max-width: 720px) {
          body {
              width: 100%;
              padding: 5px;
          }
          .controls {
              grid-template-columns: 1fr;
          }
          .legend {
              grid-template-columns: 1fr;
          }
      }
  </style>
</head>
<body>
<div class="container">
  <div class="problem-header">
    <h1>ğŸ§¨ ä¿¡ç®±ç‚¸è—¥å•é¡Œ (ç¶“å…¸ DP)</h1>
    <p>æ‰¾å‡ºæœ€å°‘éœ€è¦å¤šå°‘ç‚¸è—¥ï¼Œåœ¨æœ€å£æƒ…æ³ä¸‹ç¢ºå®šä¿¡ç®±èƒ½æ‰¿å—çš„æ¥µé™ï¼</p>
  </div>

  <div class="controls">
    <div class="control-group">
      <label for="mailboxes">ä¿¡ç®±æ•¸é‡ (k):</label>
      <input type="number" id="mailboxes" value="2" min="1" max="5">
    </div>
    <div class="control-group">
      <label for="maxCrackers">æœ€å¤§ç‚¸è—¥æ•¸ (m):</label>
      <input type="number" id="maxCrackers" value="6" min="1" max="12">
    </div>
    <div class="control-row">
      <button onclick="calculateDP()">ğŸ”¥ è¨ˆç®— DP</button>
      <button onclick="runAnimation()">â–¶ï¸ å‹•ç•«æ¼”ç¤º</button>
    </div>
  </div>

  <div class="legend">
    <div class="legend-item">
      <div class="legend-color current-cell"></div>
      <span>ç›®å‰è¨ˆç®—ä¸­</span>
    </div>
    <div class="legend-item">
      <div class="legend-color computed-cell"></div>
      <span>å·²è¨ˆç®—å®Œæˆ</span>
    </div>
    <div class="legend-item">
      <div class="legend-color base-case"></div>
      <span>åŸºç¤æƒ…æ³ (i>j)</span>
    </div>
    <div class="legend-item">
      <div class="legend-color impossible-case"></div>
      <span>ä¸å¯è¡Œ (k=0)</span>
    </div>
    <div class="legend-item">
      <div class="mailbox">ğŸ“®</div>
      <span>å®Œå¥½ä¿¡ç®±</span>
    </div>
    <div class="legend-item">
      <div class="mailbox destroyed">ğŸ’¥</div>
      <span>ç‚¸æ¯€ä¿¡ç®±</span>
    </div>
  </div>

  <div id="result"></div>
</div>

<div class="container">
  <div class="tabs">
    <div class="tab active" onclick="switchTab('algorithm')">ğŸ§  æ¼”ç®—æ³•åŸç†</div>
    <div class="tab" onclick="switchTab('examples')">ğŸ“š ç¶“å…¸ç¯„ä¾‹</div>
    <div class="tab" onclick="switchTab('code')">ğŸ’» ç¨‹å¼è§£æ</div>
  </div>
  <div class="tab-content" id="tab-content">
    <!-- å…§å®¹å°‡ç”± JavaScript å‹•æ…‹ç”Ÿæˆ -->
  </div>
</div>

<script>
    let dpTable = {};
    let bestChoices = {};
    let currentK = 2, currentM = 6;
    let isAnimating = false;

    function calculateDP() {
        currentK = parseInt(document.getElementById('mailboxes').value);
        currentM = parseInt(document.getElementById('maxCrackers').value);

        if (currentK > 5 || currentM > 12) {
            alert('ç‚ºäº†è¦–è¦ºæ•ˆæœï¼Œè«‹é™åˆ¶ kâ‰¤5, mâ‰¤12');
            return;
        }

        dpTable = {};
        bestChoices = {};

        const result = dp(currentK, 1, currentM);
        showResult(result);
    }

    function dp(k, i, j) {
        if (i > j) return 0;
        if (k === 0) return Infinity;

        const key = `${k}-${i}-${j}`;
        if (dpTable[key] !== undefined) return dpTable[key];

        let result = Infinity;
        let bestChoice = i;

        for (let x = i; x <= j; x++) {
            const leftCost = dp(k-1, i, x-1);
            const rightCost = dp(k, x+1, j);
            const cost = x + Math.max(leftCost, rightCost);

            if (cost < result) {
                result = cost;
                bestChoice = x;
            }
        }

        dpTable[key] = result;
        bestChoices[key] = bestChoice;
        return result;
    }

    function showResult(result) {
        const resultDiv = document.getElementById('result');

        let html = `
                <div class="problem-header">
                    <h1>ğŸ“Š è¨ˆç®—çµæœ</h1>
                    <p>${currentK} å€‹ä¿¡ç®±ï¼Œæœ€å¤š ${currentM} å€‹ç‚¸è—¥ â†’ æœ€å°‘éœ€è¦ <strong>${result}</strong> å€‹ç‚¸è—¥ï¼</p>
                </div>
            `;

        html += generateDPTable();
        html += generateOptimalStrategy();
        html += generateStepByStep();

        resultDiv.innerHTML = html;
    }

    function generateDPTable() {
        let html = '<div class="dp-table"><h3>ğŸ”¢ DP è¡¨æ ¼</h3>';

        for (let k = 1; k <= currentK; k++) {
            html += `<h4>k = ${k} å€‹ä¿¡ç®±</h4>`;
            html += '<table class="table"><thead><tr><th>i\\j</th>';

            for (let j = 1; j <= currentM; j++) {
                html += `<th>${j}</th>`;
            }
            html += '</tr></thead><tbody>';

            for (let i = 1; i <= currentM; i++) {
                html += `<tr><th>${i}</th>`;
                for (let j = 1; j <= currentM; j++) {
                    const key = `${k}-${i}-${j}`;
                    const value = dpTable[key];
                    const choice = bestChoices[key];

                    let cellClass = '';
                    let displayValue = '';
                    let title = '';

                    if (i > j) {
                        cellClass = 'base-case';
                        displayValue = '0';
                        title = `å€é–“ [${i},${j}] ç‚ºç©ºï¼Œè¿”å› 0`;
                    } else if (value === undefined) {
                        // é€™å€‹ç‹€æ…‹é‚„æ²’è¢«è¨ˆç®—
                        cellClass = 'impossible-case';
                        displayValue = '-';
                        title = 'å°šæœªè¨ˆç®—';
                    } else if (value === Infinity) {
                        cellClass = 'impossible-case';
                        displayValue = 'âˆ';
                        title = 'ç„¡æ³•å®Œæˆæ¸¬è©¦ï¼ˆä¿¡ç®±ä¸è¶³ï¼‰';
                    } else {
                        cellClass = 'computed-cell';
                        displayValue = value;
                        title = `dp(${k},${i},${j})=${value}, æœ€ä½³é¸æ“‡=${choice || 'N/A'}`;
                    }

                    html += `<td class="${cellClass}" title="${title}">${displayValue}</td>`;
                }
                html += '</tr>';
            }
            html += '</tbody></table><br>';
        }

        html += '</div>';
        return html;
    }

    function generateOptimalStrategy() {
        let html = '<div class="strategy-viz"><h3>ğŸ¯ æœ€ä½³æ¸¬è©¦ç­–ç•¥</h3>';

        function buildStrategy(k, i, j, depth = 0) {
            if (depth > 2 || i > j || k === 0) return '';

            const key = `${k}-${i}-${j}`;
            const choice = bestChoices[key];
            const cost = dpTable[key];

            if (!choice || cost === Infinity) return '';

            const indent = depth * 20;
            let stepHtml = `
                    <div class="strategy-step" style="margin-left: ${indent}px;">
                        <div class="step-header">
                            ${depth === 0 ? 'åˆå§‹ç‹€æ…‹' : `ç¬¬ ${depth} å±¤æ±ºç­–`}
                        </div>
                        <div class="step-content">
                            <span>æœ‰</span>
                            ${Array.from({length: k}, () => '<div class="mailbox">ğŸ“®</div>').join('')}
                            <span>æ¸¬è©¦ç¯„åœ [${i}, ${j}]</span>
                        </div>
                        <div class="step-content">
                            <span><strong>ç­–ç•¥ï¼š</strong>ç”¨ ${choice} å€‹ç‚¸è—¥æ¸¬è©¦</span>
                            ${Array.from({length: choice}, () => '<div class="cracker"></div>').join('')}
                        </div>
                `;

            if (depth < 2) {
                const leftKey = `${k-1}-${i}-${choice-1}`;
                const rightKey = `${k}-${choice+1}-${j}`;
                const leftCost = dpTable[leftKey] || 0;
                const rightCost = dpTable[rightKey] || 0;

                stepHtml += `
                        <div class="step-content">
                            <span>ğŸ’¥ ç‚¸æ¯€â†’å‰© ${k-1} ç®±ï¼Œç¯„åœ [${i}, ${choice-1}]ï¼Œæˆæœ¬ ${leftCost}</span>
                        </div>
                        <div class="step-content">
                            <span>âœ… æœªç‚¸æ¯€â†’å‰© ${k} ç®±ï¼Œç¯„åœ [${choice+1}, ${j}]ï¼Œæˆæœ¬ ${rightCost}</span>
                        </div>
                    `;
            }

            stepHtml += '</div>';

            if (depth < 1) {
                stepHtml += buildStrategy(k-1, i, choice-1, depth+1);
                stepHtml += buildStrategy(k, choice+1, j, depth+1);
            }

            return stepHtml;
        }

        html += buildStrategy(currentK, 1, currentM);
        html += '</div>';
        return html;
    }

    function generateStepByStep() {
        let html = '<div class="step-by-step"><h3>ğŸ“‹ è©³ç´°æ­¥é©Ÿè§£æ</h3>';

        const key = `${currentK}-1-${currentM}`;
        const finalCost = dpTable[key];
        const firstChoice = bestChoices[key];

        html += `
                <div class="step">
                    <strong>å•é¡Œï¼š</strong>æœ‰ ${currentK} å€‹ä¿¡ç®±ï¼Œè¦æ¸¬è©¦ [1, ${currentM}] ç¯„åœ
                </div>
                <div class="step">
                    <strong>æœ€ä½³é¦–é¸ï¼š</strong>ç”¨ ${firstChoice} å€‹ç‚¸è—¥æ¸¬è©¦
                    <br><small>ç‚ºä»€éº¼é¸ ${firstChoice}ï¼Ÿå› ç‚ºå®ƒæœ€å°åŒ–äº†æœ€å£æƒ…æ³çš„æˆæœ¬</small>
                </div>
                <div class="step">
                    <strong>çµæœåˆ†æï¼š</strong>
                    <br>â€¢ å¦‚æœç‚¸æ¯€ï¼šå‰© ${currentK-1} å€‹ä¿¡ç®±ï¼Œæ¸¬è©¦ [1, ${firstChoice-1}]
                    <br>â€¢ å¦‚æœæœªç‚¸æ¯€ï¼šå‰© ${currentK} å€‹ä¿¡ç®±ï¼Œæ¸¬è©¦ [${firstChoice+1}, ${currentM}]
                </div>
                <div class="step">
                    <strong>ç¸½æˆæœ¬ï¼š</strong>${finalCost} å€‹ç‚¸è—¥ï¼ˆåŒ…å«é¦–æ¬¡æ¸¬è©¦çš„ ${firstChoice} å€‹ï¼‰
                </div>
            `;

        // æ·»åŠ æ‰‹å‹•é©—è­‰å¹¾å€‹é—œéµå€¼
        if (currentK === 2 && currentM === 6) {
            html += `
                    <div class="step">
                        <strong>ğŸ” K=2 çš„é—œéµé©—è­‰ï¼š</strong>
                        <br>â€¢ dp(2,1,1) = 1 (åªéœ€æ¸¬è©¦1å€‹ç‚¸è—¥)
                        <br>â€¢ dp(2,2,2) = 2 (åªéœ€æ¸¬è©¦2å€‹ç‚¸è—¥)
                        <br>â€¢ dp(2,1,2): æ¸¬è©¦1â†’ç‚¸æ¯€=0, æœªç‚¸æ¯€=dp(2,2,2)=2, æˆæœ¬=1+max(0,2)=3
                        <br>â€¢ dp(2,1,2): æ¸¬è©¦2â†’ç‚¸æ¯€=dp(1,1,1)=1, æœªç‚¸æ¯€=0, æˆæœ¬=2+max(1,0)=3
                        <br>â€¢ æ‰€ä»¥ dp(2,1,2) = min(3,3) = 3
                    </div>
                `;
        }

        html += '</div>';
        return html;
    }

    async function runAnimation() {
        if (isAnimating) return;

        currentK = parseInt(document.getElementById('mailboxes').value);
        currentM = parseInt(document.getElementById('maxCrackers').value);

        if (currentK > 5 || currentM > 12) {
            alert('ç‚ºäº†è¦–è¦ºæ•ˆæœï¼Œè«‹é™åˆ¶ kâ‰¤5, mâ‰¤12');
            return;
        }

        isAnimating = true;
        const btn = event.target;
        const originalText = btn.textContent;
        btn.textContent = 'ğŸ”„ è¨ˆç®—ä¸­...';
        btn.disabled = true;

        try {
            // é‡ç½®è¡¨æ ¼
            dpTable = {};
            bestChoices = {};

            // é¡¯ç¤ºç©ºè¡¨æ ¼
            showEmptyTable();

            // å‹•ç•«å¡«å……
            await sleep(500);
            const result = await animateDP(currentK, 1, currentM);

            // é¡¯ç¤ºå®Œæ•´çµæœ
            setTimeout(() => {
                showResult(result);
            }, 1000);

        } catch (error) {
            console.error('Animation error:', error);
            // å¦‚æœå‹•ç•«å¤±æ•—ï¼Œç›´æ¥è¨ˆç®—çµæœ
            calculateDP();
        } finally {
            // é‡ç½®æŒ‰éˆ•ç‹€æ…‹
            setTimeout(() => {
                isAnimating = false;
                btn.textContent = originalText;
                btn.disabled = false;
            }, 2000);
        }
    }

    function showEmptyTable() {
        const resultDiv = document.getElementById('result');
        resultDiv.innerHTML = `
                <div class="problem-header">
                    <h1>ğŸ”„ æ­£åœ¨è¨ˆç®—...</h1>
                    <p>è§€å¯Ÿ DP è¡¨æ ¼çš„å¡«å……éç¨‹</p>
                </div>
                ${generateDPTable()}
            `;
    }

    async function animateDP(k, i, j) {
        if (i > j || k === 0) return i > j ? 0 : Infinity;

        const key = `${k}-${i}-${j}`;
        if (dpTable[key] !== undefined) return dpTable[key];

        // é«˜äº®ç•¶å‰è¨ˆç®—çš„æ ¼å­
        highlightCell(k, i, j);
        await sleep(300);

        let result = Infinity;
        let bestChoice = i;

        for (let x = i; x <= j; x++) {
            const leftCost = await animateDP(k-1, i, x-1);
            const rightCost = await animateDP(k, x+1, j);
            const cost = x + Math.max(leftCost, rightCost);

            if (cost < result) {
                result = cost;
                bestChoice = x;
            }
        }

        dpTable[key] = result;
        bestChoices[key] = bestChoice;

        // æ›´æ–°è¡¨æ ¼é¡¯ç¤º
        updateCell(k, i, j, result);
        await sleep(200);

        return result;
    }

    function highlightCell(k, i, j) {
        const tables = document.querySelectorAll('.table');
        if (tables[k-1]) {
            const cell = tables[k-1].rows[i].cells[j];
            if (cell) {
                cell.className = 'current-cell';
            }
        }
    }

    function updateCell(k, i, j, value) {
        const tables = document.querySelectorAll('.table');
        if (tables[k-1]) {
            const cell = tables[k-1].rows[i].cells[j];
            if (cell) {
                cell.className = 'computed-cell';
                cell.textContent = value === Infinity ? 'âˆ' : value;
            }
        }
    }

    function sleep(ms) {
        return new Promise(resolve => setTimeout(resolve, ms));
    }

    function switchTab(tabName) {
        // ç§»é™¤æ‰€æœ‰æ´»å‹•æ¨™ç±¤
        document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
        // æ·»åŠ æ´»å‹•æ¨™ç±¤
        event.target.classList.add('active');

        const content = document.getElementById('tab-content');

        if (tabName === 'algorithm') {
            content.innerHTML = generateAlgorithmContent();
        } else if (tabName === 'examples') {
            content.innerHTML = generateExamplesContent();
        } else if (tabName === 'code') {
            content.innerHTML = generateCodeContent();
        }
    }

    function generateAlgorithmContent() {
        return `
                <div class="explanation">
                    <h3>ğŸ” å•é¡Œæœ¬è³ª</h3>
                    <p>é€™æ˜¯ç¶“å…¸çš„ã€Œé›è›‹æ‰è½å•é¡Œã€è®Šå½¢ç‰ˆæœ¬ã€‚æ ¸å¿ƒæŒ‘æˆ°æ˜¯åœ¨<strong>è³‡æºæœ‰é™</strong>çš„æƒ…æ³ä¸‹ï¼Œè¨­è¨ˆä¸€å€‹<strong>æœ€å£æƒ…æ³æœ€å„ª</strong>çš„æ¸¬è©¦ç­–ç•¥ã€‚</p>

                    <h4>1. ç‹€æ…‹å®šç¾©</h4>
                    <div class="formula">dp(k, i, j) = æœ‰ k å€‹ä¿¡ç®±ï¼Œéœ€è¦æ¸¬è©¦å€é–“ [i, j] æ™‚
              æœ€å£æƒ…æ³ä¸‹éœ€è¦çš„æœ€å°‘ç‚¸è—¥æ•¸</div>

                    <h4>2. ç‹€æ…‹è½‰ç§»æ–¹ç¨‹</h4>
                    <div class="formula">dp(k, i, j) = min{x + max(dp(k-1, i, x-1), dp(k, x+1, j))}
                                  xâˆˆ[i,j]</div>
                    <p><strong>è§£é‡‹ï¼š</strong></p>
                    <ul>
                        <li><code>x</code>ï¼šé¸æ“‡çš„æ¸¬è©¦é»ï¼ˆèŠ±è²» x å€‹ç‚¸è—¥ï¼‰</li>
                        <li><code>dp(k-1, i, x-1)</code>ï¼šä¿¡ç®±ç‚¸æ¯€çš„æƒ…æ³</li>
                        <li><code>dp(k, x+1, j)</code>ï¼šä¿¡ç®±æœªç‚¸æ¯€çš„æƒ…æ³</li>
                        <li><code>max()</code>ï¼šè€ƒæ…®æœ€å£æƒ…æ³</li>
                        <li><code>min{}</code>ï¼šé¸æ“‡æœ€å„ªç­–ç•¥</li>
                    </ul>

                    <h4>3. é‚Šç•Œæ¢ä»¶</h4>
                    <ul>
                        <li><code>i > j</code>ï¼šå€é–“ç‚ºç©ºï¼Œè¿”å› 0</li>
                        <li><code>k = 0</code>ï¼šæ²’æœ‰ä¿¡ç®±ä½†é‚„éœ€æ¸¬è©¦ï¼Œè¿”å› âˆ</li>
                    </ul>
                </div>

                <div class="complexity-analysis">
                    <h3>âš¡ è¤‡é›œåº¦åˆ†æ</h3>
                    <p><strong>æ™‚é–“è¤‡é›œåº¦ï¼š</strong>O(k Ã— mÂ³)</p>
                    <p><strong>ç©ºé–“è¤‡é›œåº¦ï¼š</strong>O(k Ã— mÂ²)</p>
                    <p><strong>ç‹€æ…‹æ•¸é‡ï¼š</strong>k Ã— mÂ² å€‹å­å•é¡Œ</p>
                    <p><strong>æ¯å€‹ç‹€æ…‹ï¼š</strong>éœ€è¦å˜—è©¦ O(m) å€‹é¸æ“‡</p>
                </div>
            `;
    }

    function generateExamplesContent() {
        return `
                <div class="examples">
                    <h3>ğŸ“š ç¶“å…¸ç¯„ä¾‹åˆ†æ</h3>

                    <div class="example">
                        <h4>ç¯„ä¾‹ 1: k=1, m=10</h4>
                        <p><strong>ç­–ç•¥ï¼š</strong>åªèƒ½ç·šæ€§æœå°‹ï¼Œå¾ 1 é–‹å§‹æ¸¬è©¦åˆ° 10</p>
                        <p><strong>æœ€å£æƒ…æ³ï¼š</strong>ä¿¡ç®±èƒ½æ‰¿å— 10 å€‹ç‚¸è—¥ï¼Œéœ€è¦ 1+2+...+10 = 55 å€‹ç‚¸è—¥</p>
                        <div class="formula">dp(1,1,10) = 55</div>
                    </div>

                    <div class="example">
                        <h4>ç¯„ä¾‹ 2: k=2, m=6</h4>
                        <p><strong>æœ€ä½³é¦–é¸ï¼š</strong>ç”¨ 3 å€‹ç‚¸è—¥æ¸¬è©¦</p>
                        <p><strong>åˆ†æï¼š</strong></p>
                        <ul>
                            <li>ç‚¸æ¯€ï¼šå‰© 1 å€‹ä¿¡ç®±æ¸¬è©¦ [1,2]ï¼Œéœ€è¦ 1+2=3 å€‹ç‚¸è—¥</li>
                            <li>æœªç‚¸æ¯€ï¼šå‰© 2 å€‹ä¿¡ç®±æ¸¬è©¦ [4,6]ï¼Œæœ€å„ªç­–ç•¥éœ€è¦ 6 å€‹ç‚¸è—¥</li>
                        </ul>
                        <p><strong>ç¸½æˆæœ¬ï¼š</strong>3 + max(3,6) = 9 å€‹ç‚¸è—¥</p>
                    </div>

                    <div class="example">
                        <h4>ç¯„ä¾‹ 3: k=3, m=73</h4>
                        <p><strong>çµæœï¼š</strong>382 å€‹ç‚¸è—¥</p>
                        <p><strong>è§€å¯Ÿï¼š</strong>éš¨è‘—ä¿¡ç®±æ•¸é‡å¢åŠ ï¼Œæ•ˆç‡é¡¯è‘—æå‡</p>
                        <p><strong>å°æ¯”ï¼š</strong>k=1 éœ€è¦ 73Ã—74/2 = 2701 å€‹ç‚¸è—¥</p>
                    </div>
                </div>
            `;
    }

    function generateCodeContent() {
        return `
                <div class="explanation">
                    <h3>ğŸ’» ç¨‹å¼ç¢¼è§£æ</h3>

                    <h4>é—œéµå¯¦ç¾ç´°ç¯€</h4>

                    <div class="formula">// é‚Šç•Œæ¢ä»¶çš„é †åºå¾ˆé‡è¦ï¼
if (i > j) return 0;    // å…ˆæª¢æŸ¥å€é–“
if (k == 0) return INF; // å†æª¢æŸ¥è³‡æº</div>

                    <p><strong>ç‚ºä»€éº¼é †åºé‡è¦ï¼Ÿ</strong></p>
                    <ul>
                        <li>å¦‚æœå…ˆæª¢æŸ¥ k==0ï¼ŒæœƒæŠŠã€Œi>j ä¸” k==0ã€èª¤åˆ¤ç‚ºä¸å¯è¡Œ</li>
                        <li>å¯¦éš›ä¸Š i>j æ™‚ç­”æ¡ˆå·²ç¢ºå®šï¼Œä¸éœ€è¦æ›´å¤šä¿¡ç®±</li>
                    </ul>

                    <h4>ç‹€æ…‹è½‰ç§»å¯¦ç¾</h4>
                    <div class="formula">for (int x = i; x <= j; x++) {
    int val = x + max(dp(k-1, i, x-1), dp(k, x+1, j));
    result = min(result, val);
}</div>

                    <p><strong>è¨˜æ†¶åŒ–çš„é‡è¦æ€§</strong></p>
                    <ul>
                        <li>ä½¿ç”¨ä¸‰ç¶­é™£åˆ— arr[k][i][j] å„²å­˜çµæœ</li>
                        <li>é¿å…é‡è¤‡è¨ˆç®—ç›¸åŒå­å•é¡Œ</li>
                        <li>å°‡æŒ‡æ•¸æ™‚é–“é™ç‚ºå¤šé …å¼æ™‚é–“</li>
                    </ul>

                    <h4>å„ªåŒ–æŠ€å·§</h4>
                    <ul>
                        <li><strong>å‰ªæï¼š</strong>å¦‚æœç•¶å‰æˆæœ¬å·²è¶…éå·²çŸ¥æœ€å„ªè§£ï¼Œæå‰çµ‚æ­¢</li>
                        <li><strong>é è™•ç†ï¼š</strong>å¯ä»¥é è¨ˆç®—å°è¦æ¨¡çš„ DP è¡¨</li>
                        <li><strong>ç©ºé–“å„ªåŒ–ï¼š</strong>æ»¾å‹•é™£åˆ—æŠ€è¡“ï¼ˆé€²éšï¼‰</li>
                    </ul>

                    <h4>é™¤éŒ¯æŠ€å·§</h4>
                    <ul>
                        <li>å…ˆç”¨å°è³‡æ–™æ¸¬è©¦ï¼ˆkâ‰¤2, mâ‰¤5ï¼‰</li>
                        <li>æ‰‹ç®—é©—è­‰é‚Šç•Œæƒ…æ³</li>
                        <li>è¼¸å‡ºä¸­é–“çµæœæª¢æŸ¥ç‹€æ…‹è½‰ç§»</li>
                    </ul>

                    <h4>ç›¸é—œè®Šå½¢å•é¡Œ</h4>
                    <ul>
                        <li><strong>ç¶“å…¸é›è›‹å•é¡Œï¼š</strong>æ±‚æœ€å°‘è©¦é©—æ¬¡æ•¸</li>
                        <li><strong>çŒœæ•¸å­—éŠæˆ²ï¼š</strong>æœ€å°‘è©¢å•æ¬¡æ•¸</li>
                        <li><strong>äºŒåˆ†æœå°‹è®Šå½¢ï¼š</strong>æœ‰é™æŸ¥è©¢æ¬¡æ•¸</li>
                    </ul>
                </div>
            `;
    }

    // åˆå§‹åŒ–
    calculateDP();

    // è¼‰å…¥é è¨­çš„æ¼”ç®—æ³•åŸç†é é¢
    document.getElementById('tab-content').innerHTML = generateAlgorithmContent();
</script>
</body>
</html>
